# 2024-12-13

# :sunglasses: Today I Learned

# 강의: 도커, 도커 스웜, 도커 컴포즈, 쿠버네티스 
# ghcr

- **ghcr** 은 Github Container Registry 의 약어

## 사용법

- 깃헙 토큰 생성
- 도커 로그인
    - `docker login ghcr.io -u mingoo36`
    - password: <발급받은 토큰>
    - 성공
- 도커 이미지 태그 지정
    - docker push ghcr.io/mingoo36/community_db:latest
- 확인

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/cf024025-486d-4514-84ae-3a7c5951c17c/c317fca6-a78d-4666-b550-18ce713278ff/image.png)

커뮤니티 프로젝트 이미지를 만들어 둔게 있어서 세개 올려둠

# gh

- GitHub CLI는 터미널에서 GitHub와 관련된 다양한 작업(이슈, PR, 레포지토리 관리 등)을 명령어로 수행할 수 있게 해주는 도구

## 사용법

- 설치(mac) : `brew install gh`
- 깃헙 계정과 연동 : `gh auth login`
- 끝

## 기본 명령어

- **`gh repo create`: 새로운 리포지토리 생성 (자주 씀)**

```bash
gh repo create mingoo-gh --public --description "gr 리포 생성 연습" --confirm
```

# 클러스터란

- 컴퓨터 여러대를 **하나의 네트워크**로 묶어 놓은 상태를 “**하나의 클러스터**”라고 할 수 있다.
- 노드 : 클러스터를 구성하는 각 컴퓨터
- 네트워크 : 노드들은 빠른 로컬 네트워크로 연결되어 서로 통신하고 작업을 공유한다.
- 작업 조정 : **클러스터 미들웨어**라는 소프트웨어가 각 노드에 작업을 배정해 하나의 단위로 작동하게 한다.

## 사용 이유

- 성능 향상
- 가용성
- 비용 효율성

## 종류

- 컴퓨터 클러스터
- 컨테이너 클러스터

## 컨테이너 클러스터

### 로드 밸런싱

- 여러 호스트(노드)에 작업을 분산하여 시스템 부하를 균형있게 조절함

### 고가용성

- 한  호스트(노드)에 문제가 생겨도 다른 호스트(노드)가 작업을 이어받아 서비스 중단을 방지함

### 확장성

- 필요에 따라 호스트(노드)를 추가하거나 제거하여 시스템 규모를 조절할 수 있음

### 기존 서버 관리 방법

- 문서화를 통한 서버관리
- Ansible, Chef, Puppet 과 같은 도구를 사용한 서버 관리
- 가상머신으로 서버관리
- 클라우드로 서버관리

### 도커로만 컨테이너를 관리 시 문제점

- 규모가 큰 서비스를 도커 컨테이너로만 관리하기에는 규모가 너무 크고 관리하기 힘듬
- 이러한 문제를 해결하기 위해 쿠버네티스 등장

# K8s (Kubernetes)

K8s → K”ubernete”s → K와 S 사이의 글자가 8개라서 **K8s** 

- 구글에서 처음 만든 오픈소스 플랫폼
- 컨테이너 오케스트레이션 도구
- **컨테이너를 쉽고 빠르게 배포하고 확장하고 관리는 자동화 하기 위해 등장**

### 도커 VS 쿠버네티스

- 도커 : 컨테이너 하나하나를 반려동물 키우듯 함
- K8s : 가축을 관리하듯 (100마리중 하나가 죽으면 한마리를 채워넣음)

### K8s 사용 이유

- 확장성 요구
    - 사용자가 증가하면 서버를 추가로 배포해야 함
- 높은 가용성 (자동복구: **셀프힐링**)
    - 서버에 장애가 발생하더라도 서비스는 계속 제공되어야 함
- 자동화 필요
    - 수동 배포는 오류를 초래하며, 반복 작업을 자동화해야 효율적임

# Docker Swarm

- 도커에서 만든 컨테이너 오케스트레이션 도구
- 쿠버네티스와 비슷한 역할


# 7주차 과제 : Gibhub Actions, AWS ECR 연동
- https://www.notion.so/adapterz/1-AWS-ECR-push-30ef29e070b14f378002a54992f1547a?pvs=4
- https://www.notion.so/adapterz/2-ECR-ec2-59d869c081684e69b47bf23ee348b044?pvs=4

# 회고
이런 자동화 실습은 정말 머리가 아프다... <br>
잘 배워두면 정말 유용할 것 같다 열심히해야겠다!
