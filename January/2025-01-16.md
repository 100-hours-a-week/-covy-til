# 2025-01-16

# :sunglasses: Today I Learned
# Redis 캐시 오류 해결
처음에는 Redis 캐시를 관리할 때, 게시글 및 댓글의 생성, 수정, 삭제 시 관련 캐시를 지우는 방식으로 구현했습니다. 하지만 닉네임을 수정하는 경우, 특정 게시글이나 댓글에 연결된 캐시를 모두 지울 수 없다는 문제를 발견했습니다. 이로 인해 게시글 목록을 보여줄 때, 캐싱된 이전 닉네임이 계속 표시되는 문제가 발생했습니다.

이 문제를 해결하기 위해 Redis의 전체 캐시를 삭제하는 방법도 고려했지만, 이는 조회수와 관련된 캐시(view 키)를 포함하여 모든 캐시를 삭제하게 되어 다른 문제가 발생했습니다. 원래 구현된 조회수 로직은 동일한 IP에서 2시간에 한 번만 조회수가 증가하도록 설정되어 있었습니다. 하지만 전체 캐시를 삭제할 경우, 닉네임을 변경할 때마다 조회수 캐시도 지워지며 조회수가 의도치 않게 늘어나는 문제가 발생했습니다.

이러한 문제를 해결하기 위해 새로운 접근 방식을 도입했습니다. Redis의 키 중에서 posts와 comments가 포함된 키만 삭제하는 함수를 구현하여, 닉네임 변경 시 조회수 관련 캐시는 유지하면서 게시글 및 댓글과 관련된 캐시만 지우도록 했습니다. 이를 통해 닉네임 변경 후에도 게시글 목록에서 최신 닉네임이 표시되도록 문제를 해결할 수 있었습니다.

작업 과정에서는 Redis에 저장된 캐시 데이터와 현재 보여지는 정보를 비교하면서 디버깅을 진행했으며, 이를 통해 문제의 원인을 파악하고 정확한 해결 방안을 구현할 수 있었습니다. 작업이 복잡하고 까다로웠지만, 캐시와 데이터 관리의 중요성을 체감하며 흥미로운 경험을 쌓을 수 있었습니다.

![image](https://github.com/user-attachments/assets/e5c83baa-7f46-4b7d-ac0a-56f468943d36)


